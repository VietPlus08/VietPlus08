<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Picture of date</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/blog.css">
</head>
<body>
<div class="container -sm">
    <div th:if="${message}" class="alert alert-secondary" role="alert">
        <span th:text="${message}"></span>
    </div>

    <div class="p-5 text-center bg-light" style="margin-top: 8px;">
        <div>
            <form th:action="@{/create}" method="post" th:object="${comment}">

                <div class="form-outline">
                    <textarea th:field="*{feedback}"
                              class="form-control"
                              id="textAreaExample1" rows="2"
                              placeholder="Write content"></textarea>
                    <!--                    <label class="form-label" for="textAreaExample1">Write content</label>-->
                    <small th:if="${#fields.hasErrors('feedback')}" th:errors="*{feedback}"></small>
                </div>

                <div class="form-outline">
                    <textarea th:field="*{author}"
                              class="form-control"
                              id="textAreaExample2" rows="1"
                              placeholder="Author"></textarea>
                    <small th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></small>
                </div>

                <div class="form-outline">
                    <button type="submit" class="btn btn-primary"
                            data-mdb-ripple-color="dark"> Submit
                    </button>
                </div>
            </form>
        </div>

    </div>

    <div class="p-5 text-center bg-light" style="margin-top: 8px;">
        <table class="table align-middle mb-0 bg-white">
            <tbody>
            <tr th:each="item: ${comments}">
                <td>
                    <p class="fw-bold mb-1" th:text="*{item.author}"></p>
                    <p class="text-muted mb-0"
                       th:text="*{#dates.format(item.timeOfCreateComment, 'dd/MM/yyy hh:mm')}"></p>
                </td>
                <td>
                    <p class="fw-normal mb-1" th:text="*{item.feedback}"></p>
                </td>
                <td>
                    <p class="fw-normal mb-1" th:text="*{item.mark}"></p>
                </td>

                <td>
                    <a th:href="@{/update/{id}(id=*{item.id})}"
                       data-toggle="modal"
                       data-target="#modalSubscriptionForm"
                    >
                        <i class="fa-regular fa-pen-to-square fa-2x"></i>
                    </a>
                </td>
                <td>
                    <a th:onclick="showDeleteModal([[*{item.id}]])"
                       type="button" data-bs-toggle="modal" data-bs-target="#deleteModal">
                        <i class="fa-regular fa-circle-xmark fa-2x"></i>
                    </a>
                </td>
            </tr>
            </tbody>
        </table>

        <ul class="pagination">
            <li class="page-item disabled">
                <a class="page-link" th:if="${comments.hasPrevious() == false}" href="#">Previous</a>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${comments.hasPrevious()}" th:href="@{/(page=${comments.number})}">Previous</a>
            </li>

            <li th:each="i: ${#numbers.sequence(1, comments.getTotalPages())}" class="page-item">
                <a class="page-link" th:href="@{/(page=${i})}" th:text="*{i}"></a>
            </li>

            <li class="page-item">
                <a class="page-link" th:if="${comments.hasNext()}" th:href="@{/(page=${comments.number + 2})}">Next</a>
            </li>
            <li class="page-item disabled">
                <a class="page-link" th:if="${comments.hasNext() == false}" href="#">Next</a>
            </li>
        </ul>
    </div>

</div>

<script crossorigin="anonymous"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js">
</script>
</body>
</html>