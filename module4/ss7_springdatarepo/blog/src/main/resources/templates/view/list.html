<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blog</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/blog.css">
</head>
<body>

<div class="container -sm">
<!--    <nav class="navbar navbar-expand-lg navbar-light bg-light">-->
<!--        <div class="container">-->
<!--            <button-->
<!--                    class="navbar-toggler"-->
<!--                    type="button"-->
<!--                    data-mdb-toggle="collapse"-->
<!--                    data-mdb-target="#navbarTogglerDemo03"-->
<!--                    aria-controls="navbarTogglerDemo03"-->
<!--                    aria-expanded="false"-->
<!--                    aria-label="Toggle navigation"-->
<!--            >-->
<!--                <i class="fas fa-bars"></i>-->
<!--            </button>-->
<!--            <a class="navbar-brand" th:href="@{/create}"> (+) </a>-->
<!--            <div class="collapse navbar-collapse" id="navbarTogglerDemo03">-->
<!--                <ul class="navbar-nav me-auto mb-2 mb-lg-0">-->
<!--                    <li class="nav-item">-->
<!--                        <a class="nav-link active" aria-current="page" th:href="@{/}">Blog</a>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <a class="nav-link active" aria-current="page" th:href="@{/}">Blog</a>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <a class="nav-link" th:href="@{/}">Logout</a>-->
<!--                    </li>-->
<!--                    <li class="nav-item">-->
<!--                        <a class="nav-link disabled"-->
<!--                        >Disabled</a-->
<!--                        >-->
<!--                    </li>-->
<!--                </ul>-->

<!--                <form th:action="@{/}" class="d-flex input-group w-auto" method="get">-->
<!--                    <input type="hidden" name="action" value="search">-->

<!--                    <input-->
<!--                            aria-label="Search"-->
<!--                            class="form-control"-->
<!--                            placeholder="find by name"-->
<!--                            type="search"-->
<!--                            name="searchBlog">-->
<!--                    &lt;!&ndash;                                                value="${searchPrice}"&ndash;&gt;-->

<!--                    <button-->
<!--                            class="btn btn-outline-primary"-->
<!--                            type="submit"-->
<!--                            data-mdb-ripple-color="dark"-->
<!--                    >-->
<!--                        Search-->
<!--                    </button>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </nav>-->

    <div class="p-5 text-center bg-light" style="margin-top: 8px;">

        <div th:if="${message}" class="alert alert-secondary" role="alert">
            <span th:text="${message}"></span>
        </div>
        <div>
            <form th:action="@{/}" method="post" th:object="${blog}">

                <div class="form-outline">
                    <textarea th:field="*{content}"
                              class="form-control"
                              id="textAreaExample1" rows="3"
                              placeholder="Write content"></textarea>
                    <!--                    <label class="form-label" for="textAreaExample1">Write content</label>-->
                </div>

                <div class="form-outline">
                    <textarea th:field="*{author}"
                              class="form-control"
                              id="textAreaExample2" rows="1"
                              placeholder="Author"></textarea>
                </div>
                <div class="form-outline">
                    <button type="submit" class="btn btn-primary"
                            data-mdb-ripple-color="dark"> Submit
                    </button>
                </div>
            </form>
        </div>

    </div>

    <div class="p-5 text-center bg-light" style="margin-top: 8px;">
        <table class="table align-middle mb-0 bg-white">
            <tbody>
            <tr th:each="item: ${blogs}">
                <td>
                    <p class="fw-bold mb-1" th:text="*{item.author}"></p>
                    <p class="text-muted mb-0"
                       th:text="*{#dates.format(item.dateOfCreateComment, 'dd/MM/yyyy')}"></p>
                </td>
                <td>
                    <p class="fw-normal mb-1" th:text="*{item.content}"></p>
                </td>
                <td>
                    <p class="fw-normal mb-1" th:text="*{item.mark}"></p>
                </td>
                <td>
                    <a th:href="@{/update/{id}(id=*{item.id})}">
                        <i class="fa-regular fa-pen-to-square fa-2x"></i>
                    </a>
                </td>
                <td>
                    <a onclick="showDeleteModal(item.id)"
                       type="button" data-bs-toggle="modal" data-bs-target="#deleteModal">
                        <i class="fa-regular fa-circle-xmark fa-2x"></i>
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
        <ul class="pagination">
            <li class="page-item">
                <a class="page-link" th:if="${blogs.hasPrevious()}" th:href="@{/page_list(page=${blogs.number - 1})}">Previous</a>
            </li>
            <li th:each="item: ${blogs.totalPages}" class="page-item">
<!--                class="${index == item ? "page-item active" : "page-item"}"-->
                <a class="page-link" th:href="@{/page_list(page=${blogs.number})}">*{item}</a>
            </li>
<!--            <span th:text="${blogs.number + 1}"></span>/ <span th:text="${blogs.totalPages}"></span>-->
            <li class="page-item">
                <a class="page-link" th:if="${blogs.hasNext()}" th:href="@{/page_list(page=${blogs.number + 1})}">Next</a>
            </li>
        </ul>

<!--        <ul class="pagination">-->
<!--            <c:if test="${index == 1}">-->
<!--                <li class="page-item disabled">-->
<!--                    <a class="page-link" href="#">Previous</a>-->
<!--                </li>-->
<!--            </c:if>-->
<!--            <c:if test="${index != 1}">-->
<!--                <li class="page-item ">-->
<!--                    <a class="page-link" href="${urlList}?index=${index - 1}&searchName=${searchName}">Previous</a>-->
<!--                </li>-->
<!--            </c:if>-->

<!--            <c:forEach begin="1" end="${pages}" var="item">-->
<!--                <li class="${index == item ? "page-item active" : "page-item"}">-->
<!--                <a class="page-link" href="${urlList}?index=${item}&searchName=${searchName}">${item}</a>-->
<!--                </li>-->
<!--            </c:forEach>-->

<!--            <c:if test="${index == pages}">-->
<!--                <li class="page-item disabled">-->
<!--                    <a class="page-link" href="#">Next</a>-->
<!--                </li>-->
<!--            </c:if>-->
<!--            <c:if test="${index != pages}">-->
<!--                <li class="page-item ">-->
<!--                    <a class="page-link" href="${urlList}?index=${index + 1}&searchName=${searchName}">Next</a>-->
<!--                </li>-->
<!--            </c:if>-->
<!--        </ul>-->

    </div>
</div>
</body>

<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">DELETE</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <span>Do u want to delete blog: </span><span id="showId"></span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <form th:action="@{/delete}" method="get">
                    <input type="hidden" name="id" value="" id="id">
                    <button type="submit" class="btn btn-primary">Delete</button>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    function showDeleteModal(id){
        document.getElementById('showId').innerText = id;
        document.getElementById('id').value = id;
    }
</script>

<script crossorigin="anonymous"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js">
</script>
</html>